웹 서비스라는 용어는 http를 통해 접근할 수 있는 api를 가리키는 일반적인 용어이다. rest stands for represantational state transfer 이며 문법적으로는 좀 이상해보이는 restful이란 단어는 rest원칙을 지키는 웹서비스를 가리킬때 쓰는 말이다. 일반적으로 rest는 클라이언트와 서버의 상태 없는 연결을 뜻한다. rest의 공식 정의에는 서비스가 캐시될 수 있어야 하며 각 서비스는 계층 구조를 이룰 수 있어야한다는 문구도 있다.

api를 제공하려면 공통언어가 있어야한다. 통신중 일부분은 이미 정해져있다. 서버와 통신할 때는 반드시 http 를 사용해야한다. 하지만 그 외에는 어떤 데이터 언어든 자유롭게 쓸 수 있다.

XML 은 전동적으로 쓰였고 현재도 중요한 마크업 언어이다.
xml이 그렇게 복잡한건 아니지만 더글러스 크록퍼드는 더 경량화 할 수 있다고 보고 자바스크립트 객체 표기법을 만들었다. json은 자바스크립트와 매우 잘 어울릴 뿐 만 아니라 일반적으로 XML에 비해 하드코딩하기 쉽다는 장점도있다. 
json은 자바스크립트와 잘 어울리긴 하지만 자바스크립트 전용은 아니며 어떤 언어로든 쉽게 파싱할 수 있는 형식이다.

http api의 에러보고는 보통 http상태 코드를 통해 이루어진다. 요청이 200을 반환하면 클라이언트 요청이 성공했음을 알게된다. 요청이 500을 반환하면 요청이 실패한것이다.
일반적으로 에러는 다음과 같은 카테고리로 나눌수 있다. **심각한 에러** 서버가 불안정하거나 알 수 없는 상태일때 일어난다. 보통 이런 에러는 예외 처리에 실패했을 때 발생한다. 심각한 에러에서 복구하는 안전한 방법은 서버 재시작뿐이다. 이상적인 경우 대기중인 요청이 모두 500응답코드를 받겠지만 에러가 너무 심각하다면 서버가 전혀 응답할 수 없어서 모든 요청은 타임아웃될 것이다.
**복구 가능한 서버에러** 복구가능한 에러는 서버 재시작이나 기타 엄청난 행동이 필요하지는 않는다. 이런에러는 데이터베이스 연결이 끊기는 등 서버에 예기치 못한 에러 조건이 생겼을 때 일어난다 문제는 일시적일수도 지속적일 수도 있다. 이상황에서는 응답코드 500이 적절하다.


**클라이언트 에러**
클라이언트 에러는 클라이언트 쪽 실수의 결과이며 보통 매개변수가 없거나 잘못 됐을 때 생긴다.
서버문제는 아니기 때문이다. 모든 것이 정상이며 클라이언트에게 api를 정확하게 사용하라고 하면된다.
옵션은 두가지이다. 상태코드를 200으로 응답하면서 응답 본문에서 에러에 대해 설명하거나, 혹은 적절한 http상태 코드로 에러임을 나타낼 수 있다. 유용한 응답코드는 404(찾을수없음), 400(잘못된요청), 401(권한없음)이있다. 또한 응답 본문에도 에러에 관한 설명을 넣어야한다.
한걸음 더 나아가서 에러 메시지에 문서 링크를 넣을 수도있다.


### 크로스 소스 자원 공유

api를 만들고 있다면 다른사람이 그 api를 쓰게 하고 싶을 것이다. 결국 크로스 사이트 http요청이 일어난다. 크로스 사이트 http요청은 항상 여러가지 공격의 대상이므로 동일소스 정책에 의해 제한받고 스크립트를 불러오는데 제약이 따른다. 동일 소스 정책이란 프로토콜 도메인 포트가 반드시 일치해야한다는 것이다.
결과적으로 다른 사이트의 api를 사용하는게 불가능해지는데, 이 때문에 크로스 소스 자원 공유가 등장했다. cors는 건별로 이 제한을 완화하며, 스크립트 접근을 허용하는 특정 도메인 목록을 만들 수도 있다.

