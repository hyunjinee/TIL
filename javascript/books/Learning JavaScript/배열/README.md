# 배열 Array

## 8.1 배열의 기초

- 배열은 객체와 다르게, 본질적으로 순서가 있는 데이터의 집합이며, 0으로 시작하는 숫자형 인덱스를 사용한다.
- 배열은 비균질적이다. 즉 한 배열의 요소가 모두 같은 타입일 필요는 없다.
- 배열은 다른 배열이나 객체도 포함 할 수 있다.
- 배열 리터럴은 대괄호로 만들고, 배열 요소에 인덱스로 접근할 때도 대괄호를 사용한다.
- 모든 배열에는 요소가 몇개 있는지 나타내는 length 프로퍼티가 있다.
- 배열에 배열 길이보다 큰 인덱스를 사용해서 요소를 할당하면 배열은 자동으로 그 인덱스에 맞게 늘어나며, 빈자리는 undefined로 채워진다.
- Array 생성자를 써서, 배열을 만들수 있지만 그렇게 해야하는 경우는 별로 없다.

## 8-2 배열 요소 조작

배열 메서드 중 일부는 배열 '자체를' 수정하며, 다른 일부는 새 배열을 반환한다. 예를 들어 push는 배열 자체를 수정하며, concat 은 새배열을 반환한다. 메스드 이름에 이런 차이점에 대한 힌트가 전혀 없으므로 프로그래머가 전부 기억해야한다.
push 와 pop 은 각각 배열의 끝에 요소를 추가하거나 제거한다.shift 와 unshift는 각각 배열의 처음에 요소를 제거하거나 추가한다.

### concat

```javascript
let arr = [1, 2, 3];
console.log(arr.concat([4, 5, 6]));
console.log(arr.concat([4, 5], 6));
console.log(arr.concat([4, [5, 6]]));
console.log(arr); // [1,2,3]
```

위 코드를 보면 concat 은 배열을 합칠 때 쓴다는 것을 알수 있다. 하지만 여기서 배열을 합칠 때 껍떼기를 한번 까고 합친다. 두번째 껍떼기부터는 그대로 들어간다. 그리고 또한 사본을 반환하고 원본은 그대로 내비두는것을 마지막 줄로부터 알 수 있다.

### 배열 일부 가져오기

배열의 일부만 가져올 때는 slice (햄 슬라이스 떠서 먹듯이) 메서드를 사용한다. slice 는 매개변수 2개를 받는다. 첫번째 매개변수는 어디서부터가져오냐, 두번째 매개변수는 어디까지 가져오냐이다. (바로 앞 인덱스 까지 가져온다.) 두번째 매개변수 생략시 배열 마지막 까지 반환한다. 이 메서드에서는 음수 인덱스가 가능하고, 음수 인덱스 사용시 배열의 끝에서 부터 요소를 센다.

### 임의의 위치에 요소 추가하거나 제거하기

splice 메서드는 배열을 자유롭게 수정할 수 있다. 첫번째 매개변수는 수정을 시작할 인덱스이고, 두번째 매개변수는 제거할 요소 숫자이다. 아무요소도 제거하지 않을 때에는 0을 넘긴다. 나머지 매개변수는 배열에 추가될 요소이다.
splice 는 개꿀인것 같다.

### 8.2.5 배열 안에서 요소 교체하기

copyWithin 은 ES6에서 도입한 새 메서드이다. 이 메서드는 배열 요소를 복사해서 다른위치에 붙여넣고, 기존의 요소를 덮어쓴다. 첫번째 매개변수는 복사한 요소를 붙여넣을 위치, 두번째 매개변수는 복사를 시작할 위치, 세번째 매개변수는 복사를 끝낼위치(생략가능)이다. splice와 마찬가지로 음수인덱스를 사용하면 배열 끝부터 센다.

### 특정 값으로 배열 채우기

ES6 에서 도입한 새 메서드 fill은 정해진 값으로 배열을 다채운다. 크기를 지정해서 배열을 생성하는 Array 생성자와 어울린다. 배열의 일부만 채우려 할 때에는 시작인덱스와 끝 인덱스를 지정한다. 음수 인덱스도 사용가능하다.

## 8.3 배열 검색

배열안에서 먼가 찾으려 할때.. indexOf 가 있다. 이것은 찾고자하는 것과 정확히 일치하는 (===) 첫 번째 요소의 인덱스를 반환한다.indexOf 의 짝인 lastIndexOf 는 배열의 끝에서부터 검색한다. 배열 일부분만 검색하려면 시작인덱스를 지정가능하다.
만약 일치하는것을 찾지못하면 -1을 반환한다.
findIndex 는 일치하는 것을 찾지 못했을 때 -1을 반환한다는 점에서는 indexOf와 비슷하지만, 보조함수를 써서 검색조건을 지정할 수 있으므로 indexOf보다 더 다양한 상황에서 활용이 가능하다.하지만 findIndex는 검색을 시작할 인덱스를 정할수없고, 뒤에서부터 찾는 findLastIndex 같은 짝도없다.

## map and filter

map은 배열 요소를 변형한다. 일정한 형식의 배열을 다른 형식으로 바꿔야 한다면 map을 사용한다. 콜백 함수는 각 요소에서 호출될 때 요소 자체와 요소 인덱스, 배열 전체를 매개변수로 받는다.

```javascript
const items = ["Widget", "Gadget"];
const prices = [9.95, 22.95];
const cart = items.map((x, i) => ({ name: x, price: prices[i] }));
//cart: [{name:"Widget", price:9.95}, {name:"Gadget", price:22.95}]
```

객체를 괄호로 감싼이유는 이렇게 하지 않으면 화살표 표기법에서 중괄호를 블럭으로 판단하기 때문이다.
filter는 이름이 암시하듯 배열에서 필요한 것들만 남길 목적으로 만들어졌다.filter 는 map 과 마찬가지로 사본을 반환하며 새 배열에는 필요한 요소만 남긴다. 여기서 어떤 요소를 남길지 판단하는 함수를 전달해준다.

## 배열의 마법 reduce

map이 배열의 각 요소를 변형한다면 reduce는 배열 자체를 변형한다. reduce 라는 이름은 이 메서드가 보통 배열의 값을 하나로 줄이는데 쓰이기 때문에 붙여졌습니다. reduce가 반호나하는 값 하나는 객체일 수 있고, 다른 배열일 수 있다. reduce 가 받는 첫번째 매개변수는 뱅려이 줄어드는 대상인 어큐뮬레이터이다. 두 번째 매개변수부터는 여태까지 설명한 콜백이 순서대로 현재 배열 요소, 현재 인덱스, 배열 자체이다.

## 8.7 문자열 병합

배열의 문자열 요소들을 몇몇 구분자로 합치려 할 때가 많다. Array.prototype.join 은 매개변수로 구분자 하나를 받고 요소들을 하나로 합친 문자열을 반환한다. 이 매개변수가 생략 됐을 때의 기본값은 쉼표이며, 문자열 요소를 합칠 때 정의되지 않은 요소, 삭제된 요소, null ,undefined 는 모두 빈 문자열로 취급한다.

```javascript
const arr = [1, null, "hello", "world", true, undefined];
delete arr[3];
console.log(arr.join());
console.log(arr.join(""));
console.log(arr.join(" -- "));
//1,,hello,,true,
//1hellotrue
//1 --  -- hello --  -- true --
```

## 8.8 요약

자바스크립트 Array 클래스에는 강력하고 유연한 메서드가 많다. 때로는 어떤 메서드가 최선일지 판단하기 어려울 수도있다.
콜백을 받는 메서드들은 또한 옵션으로 콜백을 호출할 때 this 값으로 사용할 값을 받을 수 있다. 이 매개변수를 활용해서 콜백함수를 메서드처럼 활용할 수 있다.
예제)

```javascript
arr.find(function (p) {
  return (p.id = this.id);
}, juliet); //여기서 this 는 juliet 객체를 가르킨다.
```

또한 사본을 반환하는 메서드는 다음과같다.
concat, slice, map, filter, reduce, join
